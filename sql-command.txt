1. Tạo bảng users
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    alias_name VARCHAR(255) NOT NULL,
    username VARCHAR(50) UNIQUE NOT NULL,
    password TEXT, -- Mật khẩu sẽ được hash nên dùng TEXT
    branch INT, -- Có thể dùng FOREIGN KEY nếu có bảng branches
    role VARCHAR(50) NOT NULL CHECK (role IN ('admin', 'staff')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

2. Tạo bảng products
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    product_name VARCHAR(255) NOT NULL,
    product_code VARCHAR(50) UNIQUE NOT NULL,
    unit_price INT NOT NULL CHECK (unit_price >= 0),
    branch_id INT NOT NULL,
    image TEXT
);

3. Tạo bảng branches
CREATE TABLE branches (
    id SERIAL PRIMARY KEY,
    branch_name VARCHAR(255) NOT NULL,
    alias_branch VARCHAR(255),
    address TEXT
);


// Fetch danh sách branches
    useEffect(() => {
        const fetchBranches = async () => {
            try {
                const token = localStorage.getItem("token");
                const res = await fetch(`/api/branches`, {
                    headers: {
                        Authorization: `Bearer ${token}`,
                    },
                });

                const data = await res.json();
                if (data.error) {
                    setError(data.error);
                } else {
                    setBranches(data.branches);
                    if (data.branches.length === 1) {
                        setBranchId(data.branches[0].id); // Nếu chỉ có 1 branch, gán mặc định
                    }
                }
            } catch (err) {
                console.error("Error fetching branches:", err);
                setError("Error fetching branches.");
            }
        };

        fetchBranches();
    }, []);
